<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>V√≤ng xoay k·ª∑ ni·ªám</title>
<meta name="viewport" content="width=device-width, initial-scale=0.67, maximum-scale=1.0, user-scalable=no">

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f9fc;
    text-align: center;
    margin: 0;
    height: 100vh;
    overflow: hidden;
    overflow-y: scroll;
  }
  h1 { margin: 16px 0; }

  .stage {
    width: 100%;
    height: 70vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .carousel {
    width: 100%;
    height: 100%;
    perspective: 1500px;
    margin-top: 100px;
    margin-bottom: 50px;
    display: flex;
    justify-content: right;
    scroll-snap-type: x mandatory;
    align-items: center;
    cursor: grab;
  }
  #carousel {
    width: 80%;
    height: 80vh;
    margin: 0 auto;
    position: relative;
    overflow: hidden; 
  }
  h1, h2, h3 {
    margin-bottom: 60px;
    position: relative;
    z-index: 2;
  }
  .carousel-slide img {
    width: 100%;
    height: auto;
    max-height: 650px;   /* üëà ·∫£nh cao t·ªëi ƒëa */
    object-fit: contain; /* üëà gi·ªØ ·∫£nh nguy√™n t·ªâ l·ªá, kh√¥ng b·ªã c·∫Øt */
    border-radius: 20px;
  }
  .carousel-container {
    perspective: 1000px;
    max-width: 5000px;
    padding: 20px;
    height: 1000px;
    max-height: 500px;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    padding-bottom: 40px;
  }
  
  .carousel.dragging { cursor: grabbing; }

  .carousel-track {
    width: 100%;
    height: 1000px;
    position: relative;
    transform-style: preserve-3d;
  }

  .card {
    width: 320px;
    height: 200px;
    border-radius: 1%;
    box-shadow: 0 8px 20px rgba(254, 251, 251, 0.2);
    text-align: center;
    padding: 10px;
    position: absolute;
    top: 35px;
    left: 50%;
    transform: translateX(-50%);
    transition: transform 0.3s ease;
    overflow: hidden;
    padding-bottom: 50px;
    padding-top:3.8%;
  }

  .card img,
.card video,
.card iframe {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain; /* Gi·ªØ nguy√™n t·ªâ l·ªá */
  border-radius: 10px;
  display: block;
  margin: auto;
}

  .caption {
  margin: 20px 0 0;
  font-weight: bold;
  color: #5f425f; /* t√≠m neon */
  user-select: none;
  font-size: 28px;
  text-shadow: 
    0 0 5px   #ff00ff,
    0 0 10px  #ff00ff,
    0 0 20px  #ff00ff,
    0 0 40px  #ff00ff,
    0 0 80px  #ff00ff;
}

  .days {
    margin-top: 100px;
    display: grid;
    grid-template-columns: repeat(6,1fr);
    gap: 12px;
    justify-items: center;
  }
  .day {
    padding: 10px 14px;
    background: #007bff;
    color: #fff;
    border-radius: 8px;
    cursor: pointer;
    text-align: center;
  }
  .day:hover { background: #0056b3; }
  .day.active { background: #0a58ca; }
   .prev, .next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #007bff;
      color: #fff;
      border: none;
      font-size: 32px;
      padding: 14px 20px;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0.9;
      transition: 0.3s;
      z-index: 10;
    }

    .prev:hover, .next:hover {
      background: #0056b3;
      opacity: 1;
    }

    .prev { left: 20px; }
    .next { right: 20px; }
    canvas {
      display: block;
    }
    .button-group {
  display: flex;
  flex-direction: column; /* x·∫øp d·ªçc */
  gap: 10px;              /* kho·∫£ng c√°ch gi·ªØa c√°c n√∫t */
  position: absolute;     /* n·∫øu mu·ªën n√∫t n·ªïi 1 g√≥c */
  bottom: 20px;           /* ch·ªânh v·ªã tr√≠ */
  left: 20px;
  
}

.button-group button {
  padding: 10px 16px;      /* kho·∫£ng c√°ch trong n√∫t */
  border: none;
  border-radius: 6px;
  background: #b18924;     /* m√†u n·ªÅn n√∫t */
  color: white;            /* m√†u ch·ªØ */
  font-size: 14px;         /* k√≠ch th∆∞·ªõc ch·ªØ */
  font-weight: bold;       /* ch·ªØ ƒë·∫≠m */
  font-family: Arial, sans-serif; /* font ch·ªØ */
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.button-group button:hover {
  background: #95893b;
}
    #bg-canvas {
      position: fixed;   /* ph·ªß to√†n m√†n h√¨nh */
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;       /* n·∫±m d∆∞·ªõi carousel */
      background: rgb(252, 248, 248); /* n·ªÅn ƒëen cho ch·ªØ r∆°i */
    }
    .falling-text {
      position: absolute;
      font-size: 22px;
      color: #f0ff4dd1;
      font-weight: bold;
      white-space: nowrap;
      text-shadow: 0 0 8px #ff4dff;
      animation: fall 5s linear forwards;
    }

    @keyframes fall {
      from { transform: translateY(-10vh); opacity: 1; }
      to   { transform: translateY(110vh); opacity: 0; }
    }
</style>
</head>
<body>
<!-- üëá th√™m canvas n·ªÅn -->
<canvas id="bg-canvas"></canvas>

<h1>K·ª∑ Ni·ªám C·ªßa C·∫£ Nh√†</h1>

<div class="stage">
  <div class="carousel" id="carousel">
    <div class="carousel-track" id="track"></div>
  </div>
</div>

<!-- DANH S√ÅCH NG√ÄY -->
<div class="days">
  <div class="day" data-media=" KIM.jpg,
   1 (3).jpg,
    1 (4).jpg,
     1 (5).jpg,
      1 (6).jpg,
       1 (7).jpg,
        1 (8).jpg,
         1 (9).jpg,
          1 (10).jpg,
           1 (11).jpg,
            1 (12).jpg,
             1 (13).jpg,
              1 (14).jpg,
               1 (15).jpg, 1 (16).jpg, 1 (17).jpg, 1 (18).jpg, 1 (19).jpg, 1 (20).jpg, 1 (21).jpg, 1 (22).jpg, 1 (23).jpg, 1 (24).jpg, 1 (25).jpg, 1 (26).jpg, 1 (27).jpg, 1 (28).jpg, 1 (29).jpg, 1 (30).jpg, 1 (31).jpg, 1 (32).jpg, 1 (33).jpg, 1 (34).jpg, 1 (35).jpg, 1 (36).jpg, 1 (37).jpg, 1 (38).jpg, 1 (39).jpg, 1 (40).jpg, 1 (41).jpg, 1 (42).jpg, 1 (43).jpg, 1 (44).jpg, 1 (45).jpg, 1 (46).jpg, 1 (47).jpg, 1 (48).jpg, 1 (49).jpg, 1 (50).jpg, 1 (51).jpg, 1 (52).jpg, 1 (53).jpg, 1 (54).jpg, 1 (55).jpg, 1 (56).jpg,
                1 (57).jpg ">
                
  ·∫£nh d√¨m banh n√≥c

</div>
    <div class="day" 
     data-media="1 (1).mp4,1 (2).jpg,1 (2).mp4">
              
                 ·∫£nh t√¢m t√¨nh
                 </div>
    <div class="day" 
  data-media="|Diem.mp3,|ChiGiau.mp3" 
  data-captions="Con T∆∞·ªõng Nh·∫•t v√† b·ªãch ng≈© c·ªëc|ai d·∫≠y">
  Gi·ªçng ·∫¢i Gi·ªçng Ai
</div>

<button class="prev" id="prevBtn">&#10094;</button>
  <button class="next" id="nextBtn">&#10095;</button>
  </div>

<script>
  /* --------------------- CODE C≈® GI·ªÆ NGUY√äN -------------------- */
  const track = document.getElementById("track");
const dayEls = document.querySelectorAll(".day");
const isImage = src => /\.(jpe?g|png|gif|webp|avif)$/i.test(src);
const isVideo = src => /\.(mp4|webm|ogg)$/i.test(src);
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
let list = [];
let captions = [];
let angle = 0;
let startX = 0;
let isDragging = false;
let counter = 0;
const radius = 800;

let currentAudio = null; // gi·ªØ audio ƒëang ph√°t

function makeMediaEl(src) {
  if (isImage(src)) {
    const img = document.createElement("img");
    img.src = src;
    return img;
  } else if (isVideo(src)) {
    const vid = document.createElement("video");
    vid.src = src;
    vid.playsInline = true;
    vid.muted = true;
    vid.loop = true;
    vid.autoplay = true;
    return vid;
  }
  return document.createTextNode("Kh√¥ng h·ªó tr·ª£: " + src);
}

function renderCards() {
  track.innerHTML = "";
  if (!list.length) return;
  list.forEach((item,i) => {
    const card = document.createElement("div");
    card.className = "card";

    // Lu√¥n render ·∫£nh/video
    if (item.img) {
      const media = makeMediaEl(item.img);
      card.appendChild(media);
    }

    // caption
    const p = document.createElement("p");
    p.className = "caption";
    p.textContent = captions[i] || "";
    card.appendChild(p);

    // N·∫øu c√≥ audio th√¨ g·∫Øn v√†o dataset
    if (item.audio) {
      card.dataset.audio = item.audio;
    }

    track.appendChild(card);
  });
  updatePositions();
}


function updatePositions() {
  const cards = document.querySelectorAll(".card");
  const total = cards.length;

  let centerCard = null;

  cards.forEach((card, i) => {
    const theta = (360 / total) * i + angle;
    const rad = theta * Math.PI / 180;
    let x = Math.sin(rad) * radius - 150;
    let z = Math.cos(rad) * radius;
    let finalScale = 0.8;
    let opacity = 0.2;
    let zIndex = Math.floor(z);

    if (Math.abs(theta % 360) < 15 || Math.abs(theta % 360) > 345) {
      finalScale = 1.4;
      opacity = 1;
      zIndex = 1000;
      centerCard = card;
    }

    card.style.transform = `translateX(${x}px) translateZ(${z}px) scale(${finalScale})`;
    card.style.top = "35%";
    card.style.left = "50%";
    card.style.opacity = opacity;
    card.style.zIndex = zIndex;

    const video = card.querySelector("video");
    if (video) {
      if (finalScale > 1) { video.muted = false; video.play().catch(()=>{}); }
      else { video.pause(); video.muted = true; }
    }
  });

  // üéµ ph√°t nh·∫°c khi card ·ªü gi·ªØa
  if (centerCard) {
    const audioSrc = centerCard.dataset.audio;
    if (audioSrc) {
      if (!currentAudio || !currentAudio.src.includes(audioSrc)) {
        if (currentAudio) { currentAudio.pause(); }
        currentAudio = new Audio(audioSrc);
        currentAudio.play().catch(()=>{});
      }
    } else {
      if (currentAudio) { currentAudio.pause(); currentAudio = null; }
    }
  }
}

dayEls.forEach(d => {
  d.addEventListener("click", () => {
    dayEls.forEach(x => x.classList.remove("active"));
    d.classList.add("active");

    // üîá khi ƒë·ªïi day th√¨ d·ª´ng audio c≈©
    if (currentAudio) {
      currentAudio.pause();
      currentAudio = null;
    }

    list = [];
    const mediaStr = d.getAttribute("data-media") || "";
    mediaStr.split(",").forEach(s => {
      if (!s.trim()) return;
      const parts = s.split("|").map(p => p.trim());
      list.push({ img: parts[0], audio: parts[1] || null });
    });

    captions = (d.getAttribute("data-captions")||"").split("|").map(s=>s.trim());
    angle = 0;
    renderCards();
  });
});

document.addEventListener("mousedown", e => { isDragging = true; startX = e.clientX; });
document.addEventListener("mousemove", e => {
  if (!isDragging) return;
  const deltaX = e.clientX - startX;
  angle += deltaX * 0.1;
  updatePositions();
  startX = e.clientX;
});
document.addEventListener("mouseup", () => { isDragging = false; });

document.addEventListener("touchstart", e => { isDragging = true; startX = e.touches[0].clientX; });
document.addEventListener("touchmove", e => {
  if (!isDragging) return;
  const deltaX = e.touches[0].clientX - startX;
  angle += deltaX * 0.3;
  updatePositions();
  startX = e.touches[0].clientX;
});
document.addEventListener("touchend", () => { isDragging = false; });

(function selectFirstDay(){
  for (const d of dayEls) {
    if ((d.getAttribute('data-media')||'').trim()) { d.click(); break; }
  }
})();

nextBtn.addEventListener('click', () => { angle -= 360 / list.length; updatePositions(); });
track.addEventListener("click", e => {
  const card = e.target.closest(".card");
  if (!card) return;
  const cards = [...document.querySelectorAll(".card")];
  const idx = cards.indexOf(card);
  if (idx === -1) return;
  angle = -(360 / cards.length) * idx;
  updatePositions();
});
prevBtn.addEventListener('click', () => { angle += 360 / list.length; updatePositions(); });

  /* --------------------- HI·ªÜU ·ª®NG CH·ªÆ R∆†I -------------------- */
const canvas = document.getElementById("bg-canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const texts = [
  "AL B√° Gia Lai",
  "M·ªùi C·∫£ Nh√† ƒÇn C∆°m",
  "8h h·ªçp ƒë·ªôi h√¨nh nha m·ªçi ng∆∞·ªùi ∆°i",
  "Ch√∫c c·∫£ nh√† lu√¥n vui v·∫ª",
  "Th√†nh c√¥ng nh√©!",
  "Ai ƒëi h√†nh ch√≠nh c√¥ng kh√¥ng",
  "Thi√™n ∆°i",
  "Anh Pon ∆°i",
  "N·∫•u c∆°m ch∆∞a v·∫≠y",
  "H√¥m nay kh√¥ng t·∫≠p m√∫a nha",
  "b·∫Øt C·ªçp u·ªëng r∆∞·ª£u c·∫ßn ƒë√™",
  "ch√≠nh quy·ªÅn ",
  "gi√°ng my heo",
  "ƒëi·ªÅm ·ªìn",
  "Lan ·ªìn nh∆∞ng ƒë√°ng y√™u",
  "ch·ªã gi√†",
  "Tr√¢n l√† heo peppa",
  "trang xinh???",
  "nhi cute d·ªÖ th∆∞∆°ng v√¥ ƒë·ªëi",
  "Sƒ© U40",
  "B√† Kim ƒêi√™n ",
  "Ba Duy",
  "√Ånh ngu",
  "C√¥ng ch√∫a th·ªßy t·ªÅ",
  "Ng√¢n Khoa m·∫≠p",
  "Xu√¢n Kh√¥i ƒê·∫πp 1st",
  "C√¥ gi√°o",
  "Ng√¢n thu m·∫≠p",
  "Le le",
  "Y·∫øn Y·∫øn",
  "H∆∞ng Gi√†",
  "ƒê·∫°t c·ªçc",
  "Ti√™u Dao",
  "Ph√∫ b√†",
  "√îng ƒë·ªãa Kh∆∞∆°ng",
  "G·∫•u",
  "Th·ªè",
  "Alice",
  "ƒê·∫£ng Vi√™n m·ªõi",
  "TrƒÉng h√¥m nay ƒë·∫πp nh·ªâ",
  "N·ªù L·ªù",
  "H·ªá T∆∞ T∆∞·ªüng Ng·ªçc Lan",
  "Nh√† t√†i tr·ª£ kim c∆∞∆°ng",
  "Ch∆°i U ƒëi c·∫£ nh√†",
  "Minh m√†y ch·ªçn ai",
  "Minh, ch·ªã th√≠ch em l·∫Øm ƒë√≥",
  "Ch·ªã th·∫Øng r·ªìi.....",
  "C·∫£ l√†ng ƒëi ng·ªß",
  "S√≥i ∆°i d·∫≠y ƒëi",
  "M·ªùi c·∫£ nh√† ra t·∫≠p th·ªÉ d·ª•c",
  "Nay m√¨nh ch·∫°y 3 v√≤ng s√¢n",
  "T·ªëi em v·ªõi anh ƒëi ng·∫Øm trƒÉng",
  "Th√¥ng b√°o t√¨m ƒë·ªì",
  "ƒê·∫•t n∆∞·ªõc nghi√™ng m√¨nh...",
  "B√† Kim, ph√π ph√©p b·∫£ cho em",
  "Th·ªßy T·ªÅ l√†m ph√©p cho em",
  "F4 + 1 ",
  "ng∆∞·ªùi ta c√≥ c√¢u",
  "Ba duy",
  "2 3 d√¥ , 2 3 u·ªëng"
  
];

const maxLetters = 250; 
let falling = [];

// ·∫¢nh n·ªÅn
const bgImage = new Image();
bgImage.src = "anh-nen-pon.jpg"; // thay link ·∫£nh n·ªÅn c·ªßa b·∫°n

// l·ªõp FallingText 3D + glow
class FallingText {
  constructor(text) {
    this.text = text;
    this.x = (Math.random() - 0.5) * canvas.width * 2;  
    this.y = Math.random() * 80;      
    this.z = Math.random() * 1000 + 300; 
    this.speed = 1.5 + Math.random() * 2;  
    this.baseSize = 50 + Math.random() * 20; 

    // m√†u ch·ªØ + ph√°t s√°ng
    this.color = "white";
    const glowColors = ["rgba(0,200,255,0.8)", "rgba(255,100,200,0.8)", "rgba(255,200,0,0.8)"];
    this.glow = glowColors[Math.floor(Math.random() * glowColors.length)];
  }
  
  draw() {
    const scale = 600 / (600 + this.z); 
    const screenX = canvas.width / 2 + this.x * scale;
    const screenY = this.y * scale;

    const size = this.baseSize * scale;
    const opacity = Math.max(0, Math.min(1, 1 - this.z / 1500));

    ctx.font = `bold ${size}px Times New Roman`;
    ctx.fillStyle = `rgba(255,255,255,${opacity})`;

    // hi·ªáu ·ª©ng glow
    ctx.shadowColor = this.glow;
    ctx.shadowBlur = 25;

    ctx.fillText(this.text, screenX, screenY);

    // reset shadow ƒë·ªÉ tr√°nh ·∫£nh h∆∞·ªüng ph·∫ßn kh√°c
    ctx.shadowBlur = 0;

    // update v·ªã tr√≠
    this.y += this.speed; 
    this.z -= 2;          
  }
}

// animate
function animate() {
  ctx.drawImage(bgImage, 0, 0, canvas.width, canvas.height);

  if (falling.length < maxLetters && Math.random() > 0.9) {
    const t = texts[Math.floor(Math.random() * texts.length)];
    falling.push(new FallingText(t));
  }

  falling.forEach((ft, i) => {
    ft.draw();
    if (ft.y > canvas.height + 100 || ft.z < -200) {
      falling.splice(i, 1);
    }
  });

  requestAnimationFrame(animate);
}

bgImage.onload = animate;

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
