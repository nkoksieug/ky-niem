<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>V√≤ng xoay k·ª∑ ni·ªám</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f9fc;
    text-align: center;
    margin: 0;
    height: 100vh;
    overflow: hidden;
    overflow-y: scroll;
  }
  h1 { margin: 16px 0; }

  .stage {
    width: 100%;
    height: 70vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .carousel {
    width: 100%;
    height: 100%;
    perspective: 1500px;
    margin-top: 100px;
    margin-bottom: 50px;
    display: flex;
    justify-content: right;
    scroll-snap-type: x mandatory;
    align-items: center;
    cursor: grab;
  }
  #carousel {
    width: 80%;
    height: 80vh;
    margin: 0 auto;
    position: relative;
    overflow: hidden; 
  }
  h1, h2, h3 {
    margin-bottom: 60px;
    position: relative;
    z-index: 2;
  }
  .carousel-slide img {
    width: 100%;
    height: auto;
    max-height: 650px;   /* üëà ·∫£nh cao t·ªëi ƒëa */
    object-fit: contain; /* üëà gi·ªØ ·∫£nh nguy√™n t·ªâ l·ªá, kh√¥ng b·ªã c·∫Øt */
    border-radius: 20px;
  }
  .carousel-container {
    perspective: 1000px;
    max-width: 5000px;
    padding: 20px;
    height: 1000px;
    max-height: 500px;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    padding-bottom: 40px;
  }
  
  .carousel.dragging { cursor: grabbing; }

  .carousel-track {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
  }

  .card {
    width: 220px;
    height: 500px;
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    text-align: center;
    padding: 10px;
    position: absolute;
    top: 35px;
    left: 50%;
    transform: translateX(-50%);
    transition: transform 0.3s ease;
    overflow: hidden;
    padding-bottom: 50px;
    padding-top:55px;
  }

  .card img,
  .card video {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 8px;
    display: block;
  }

  .caption {
    margin: 10px 0 0;
    font-weight: bold;
    color: #c02525;
    user-select: none;
  }

  .days {
    margin-top: 100px;
    display: grid;
    grid-template-columns: repeat(6,1fr);
    gap: 12px;
    justify-items: center;
  }
  .day {
    padding: 10px 14px;
    background: #007bff;
    color: #fff;
    border-radius: 8px;
    cursor: pointer;
    text-align: center;
  }
  .day:hover { background: #0056b3; }
  .day.active { background: #0a58ca; }
   .prev, .next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #007bff;
      color: #fff;
      border: none;
      font-size: 32px;
      padding: 14px 20px;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0.9;
      transition: 0.3s;
      z-index: 10;
    }

    .prev:hover, .next:hover {
      background: #0056b3;
      opacity: 1;
    }

    .prev { left: 20px; }
    .next { right: 20px; }
    canvas {
      display: block;
    }
    #bg-canvas {
      position: fixed;   /* ph·ªß to√†n m√†n h√¨nh */
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;       /* n·∫±m d∆∞·ªõi carousel */
      background: black; /* n·ªÅn ƒëen cho ch·ªØ r∆°i */
    }
    .falling-text {
      position: absolute;
      font-size: 22px;
      color: #ff4dff;
      font-weight: bold;
      white-space: nowrap;
      text-shadow: 0 0 8px #ff4dff;
      animation: fall 5s linear forwards;
    }

    @keyframes fall {
      from { transform: translateY(-10vh); opacity: 1; }
      to   { transform: translateY(110vh); opacity: 0; }
    }
</style>
</head>
<body>
<!-- üëá th√™m canvas n·ªÅn -->
<canvas id="bg-canvas"></canvas>

<h1>K·ª∑ ni·ªám c·ªßa ch√∫ng t√¥i</h1>

<div class="stage">
  <div class="carousel" id="carousel">
    <div class="carousel-track" id="track"></div>
  </div>
</div>

<!-- DANH S√ÅCH NG√ÄY -->
<div class="days">
  <div class="day" data-media="day1/minh1.mp4,day1/video1.mp4,day1/1.jpg,day1/2.jpg,day1/3.jpg">Ng√†y 15/08/2025</div>
    <div class="day" 
     data-media="day2/1.jpg,
                 day2/2.jpg,
                 day2/3.jpg,
                 day2/4.jpg,
                 day2/5.jpg,
                 day2/6.jpg,
                 day2/7.jpg,
                 day2/8.jpg,
                 day2/9.jpg,
                 day2/10.jpg,
                 day2/11.jpg,
                 day2/12.jpg,
                 day2/13.jpg,
                 day2/14.jpg,
                 day2/15.jpg,
                 day2/16.jpg,
                 day2/17.jpg,
                 day2/18.jpg,
                 day2/19.jpg,
                 day2/20.jpg,
                 day2/21.jpg">Ng√†y 16/08/2025</div>
    <div class="day" data-media="">Ng√†y 17/08/2025</div>  
    <div class="day" data-media="">Ng√†y 18/08/2025</div>
  <div class="day" data-media="">Ng√†y 19/08/2025</div>
  <div class="day" data-media="">Ng√†y 20/08/2025</div>
  <div class="day" data-media="">Ng√†y 21/08/2025</div>
  <div class="day" data-media="">Ng√†y 22/08/2025</div>
  <div class="day" data-media="">Ng√†y 23/08/2025</div>
  <div class="day" data-media="">Ng√†y 24/08/2025</div>
  <div class="day" data-media="">Ng√†y 25/08/2025</div>
  <div class="day" data-media="">Ng√†y 26/08/2025</div>
  <div class="day" data-media="">Ng√†y 27/08/2025</div>
  <div class="day" data-media="">Ng√†y 28/08/2025</div>
  <div class="day" data-media="">Ng√†y 29/08/2025</div>
  <div class="day" data-media="">Ng√†y 30/08/2025</div>
  <div class="day" data-media="">Ng√†y 31/08/2025</div>
  <div class="day" data-media="">Ng√†y 01/09/2025</div>
  <div class="day" data-media="">Ng√†y 02/09/2025</div>
  <div class="day" data-media="">Ng√†y 03/09/2025</div>
  <div class="day" data-media="">Ng√†y 04/09/2025</div>
  <div class="day" data-media="">Ng√†y 05/09/2025</div>
  <div class="day" data-media="">Ng√†y 06/09/2025</div>
  <div class="day" data-media="">Ng√†y 07/09/2025</div>
  <div class="day" data-media="">Ng√†y 08/09/2025</div>
<button class="prev" id="prevBtn">&#10094;</button>
  <button class="next" id="nextBtn">&#10095;</button>
  </div>

<script>
  /* --------------------- CODE C≈® GI·ªÆ NGUY√äN -------------------- */
  const track = document.getElementById("track");
  const dayEls = document.querySelectorAll(".day");
  const isImage = src => /\.(jpe?g|png|gif|webp|avif)$/i.test(src);
  const isVideo = src => /\.(mp4|webm|ogg)$/i.test(src);
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  let list = [];
  let captions = [];
  let angle = 0;
  let startX = 0;
  let isDragging = false;
  let counter = 0;
  const radius = 800;

  function makeMediaEl(src) {
    if (isImage(src)) {
      const img = document.createElement("img");
      img.src = src;
      return img;
    } else if (isVideo(src)) {
      const vid = document.createElement("video");
      vid.src = src;
      vid.playsInline = true;
      vid.muted = true;
      vid.loop = true;
      vid.autoplay = true;
      return vid;
    }
    return document.createTextNode("Kh√¥ng h·ªó tr·ª£: " + src);
  }

  function renderCards() {
    track.innerHTML = "";
    if (!list.length) return;
    list.forEach((src,i) => {
      const card = document.createElement("div");
      card.className = "card";
      const media = makeMediaEl(src);
      card.appendChild(media);
      const p = document.createElement("p");
      p.className = "caption";
      card.appendChild(p);
      track.appendChild(card);
    });
    updatePositions();
  }
  function updatePositions() {
    const cards = document.querySelectorAll(".card");
    const total = cards.length;
    cards.forEach((card, i) => {
      const theta = (360 / total) * i + angle;
      const rad = theta * Math.PI / 180;
      let x = Math.sin(rad) * radius-138;
      let z = Math.cos(rad) * radius;
      let finalScale = 0.8;
      let opacity = 0.2;
      let zIndex = Math.floor(z);
      if (Math.abs(theta % 360) < 15 || Math.abs(theta % 360) > 345) {
        finalScale = 1.4;
        opacity = 1;
        zIndex = 1000;
      }
      card.style.transform = `translateX(${x}px) translateZ(${z}px) scale(${finalScale})`;
      card.style.top = "35%";
      card.style.left = "50%";
      card.style.opacity = opacity;
      card.style.zIndex = zIndex;
      const video = card.querySelector("video");
      if (video) {
        if (finalScale > 1) { video.muted = false; video.play().catch(()=>{}); }
        else { video.pause(); video.muted = true; }
      }
    });
  }
  dayEls.forEach(d => {
    d.addEventListener("click", () => {
      dayEls.forEach(x => x.classList.remove("active"));
      d.classList.add("active");
      list = (d.getAttribute("data-media")||"").split(",").map(s=>s.trim()).filter(Boolean);
      captions = (d.getAttribute("data-captions")||"").split("|").map(s=>s.trim());
      angle = 0;
      renderCards();
    });
  });
  document.addEventListener("mousedown", e => { isDragging = true; startX = e.clientX; });
  document.addEventListener("mousemove", e => {
    if (!isDragging) return;
    const deltaX = e.clientX - startX;
    angle += deltaX * 0.1;
    updatePositions();
    startX = e.clientX;
  });
  document.addEventListener("mouseup", () => { isDragging = false; });
  document.addEventListener("touchstart", e => { isDragging = true; startX = e.touches[0].clientX; });
  document.addEventListener("touchmove", e => {
    if (!isDragging) return;
    const deltaX = e.touches[0].clientX - startX;
    angle += deltaX * 0.3;
    updatePositions();
    startX = e.touches[0].clientX;
  });
  document.addEventListener("touchend", () => { isDragging = false; });
  (function selectFirstDay(){
    for (const d of dayEls) {
      if ((d.getAttribute('data-media')||'').trim()) { d.click(); break; }
    }
  })();
  nextBtn.addEventListener('click', () => { angle -= 360 / list.length; updatePositions(); });
  track.addEventListener("click", e => {
    const card = e.target.closest(".card");
    if (!card) return;
    const cards = [...document.querySelectorAll(".card")];
    const idx = cards.indexOf(card);
    if (idx === -1) return;
    angle = -(360 / cards.length) * idx;
    updatePositions();
  });
  prevBtn.addEventListener('click', () => { angle += 360 / list.length; updatePositions(); });

  /* --------------------- HI·ªÜU ·ª®NG CH·ªÆ R∆†I -------------------- */
const canvas = document.getElementById("bg-canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const texts = [
  "AL B√° Gia Lai",
  "M·ªùi C·∫£ Nh√† ƒÇn C∆°m",
  "8h h·ªçp ƒë·ªôi h√¨nh nha m·ªçi ng∆∞·ªùi ∆°i"
]; // c·ª•m ch·ªØ thay v√¨ t√°ch r·ªùi

const maxLetters = 5; // t·ªëi ƒëa 5 c·ª•m ch·ªØ c√πng l√∫c
let falling = [];

class FallingText {
  constructor(text) {
    this.text = text;
    this.x = Math.random() * (canvas.width - 200); // random ngang, tr·ª´ l·ªÅ cho ƒë·∫πp
    this.y = -50;
    this.speed = 1.5 + Math.random() * 1.5; // t·ªëc ƒë·ªô ch·∫≠m h∆°n ch√∫t
    this.fontSize = 28 + Math.random() * 6; // font ƒë·ªìng ƒë·ªÅu
  }
  draw() {
    ctx.font = `${this.fontSize}px Arial`;
    ctx.fillStyle = "lime";
    ctx.fillText(this.text, this.x, this.y);
    this.y += this.speed;
  }
}

function animate() {
  ctx.fillStyle = "rgba(0,0,0,0.25)"; 
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // th√™m c·ª•m ch·ªØ m·ªõi n·∫øu √≠t h∆°n maxLetters
  if (falling.length < maxLetters && Math.random() > 0.97) {
    const t = texts[Math.floor(Math.random() * texts.length)];
    falling.push(new FallingText(t));
  }

  // v·∫Ω v√† c·∫≠p nh·∫≠t c·ª•m ch·ªØ
  falling.forEach((ft, i) => {
    ft.draw();
    if (ft.y > canvas.height + 50) {
      falling.splice(i, 1);
    }
  });

  requestAnimationFrame(animate);
}
animate();

// c·∫≠p nh·∫≠t k√≠ch th∆∞·ªõc khi resize
window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});

</script>
</body>
</html>
